<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>å¸¶è–ªæ‹‰å±è¨ˆç®—æ©Ÿ ğŸ’©ğŸ’°</title>
<style>
body{font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;margin:0;background:#f4f5f7;}
.container{max-width:900px;margin:0 auto;padding:16px;}
h1{text-align:center;margin:16px 0;}
.card{background:#fff;border-radius:8px;padding:16px;box-shadow:0 2px 6px rgba(0,0,0,0.08);margin-bottom:16px;}
h2{margin:0 0 8px;font-size:18px;}
label{display:block;font-size:14px;margin-bottom:4px;}
input,button,select{font-family:inherit;font-size:14px;}
input[type="number"],input[type="text"]{width:100%;box-sizing:border-box;padding:6px 8px;border:1px solid #ccc;border-radius:4px;}
.small{font-size:12px;color:#666;}
.row{display:flex;gap:8px;flex-wrap:wrap;}
.col{flex:1;min-width:160px;}
button{border:none;border-radius:4px;padding:8px 12px;cursor:pointer;}
.btn-primary{background:#4caf50;color:#fff;}
.btn-secondary{background:#2196f3;color:#fff;}
.btn-danger{background:#f44336;color:#fff;}
.btn-small{font-size:12px;padding:4px 8px;}
.summary{font-size:15px;margin-top:8px;}
.summary span{font-weight:bold;}
.table-wrapper{overflow-x:auto;margin-top:8px;}
table{width:100%;border-collapse:collapse;font-size:13px;}
th,td{border-bottom:1px solid #eee;padding:6px 8px;text-align:left;white-space:nowrap;}
th{background:#fafafa;}
.badge{display:inline-block;padding:2px 6px;border-radius:999px;font-size:11px;background:#e3f2fd;}
.timer-display{font-size:20px;font-weight:bold;text-align:center;margin:8px 0;}
.timer-running{color:#e91e63;}
.notice{font-size:12px;color:#999;margin-top:4px;}
@media(max-width:600px){
  th:nth-child(4),td:nth-child(4){display:none;}
}
</style>
</head>
<body>
<div class="container">
<h1>ğŸ’© å¸¶è–ªæ‹‰å±è¨ˆç®—æ©Ÿ ğŸ’°</h1>

<!-- è–ªè³‡è¨­å®š -->
<div class="card">
<h2>1. è¨­å®šä½ çš„è–ªæ°´</h2>
<p class="small">å¯ä»¥ç›´æ¥å¡«ã€Œæ™‚è–ªã€ï¼Œæˆ–ç”¨ã€Œæœˆè–ª + ä¸Šç­å¤©æ•¸ + æ¯å¤©å·¥æ™‚ã€è‡ªå‹•ç®—ã€‚</p>
<div class="row">
<div class="col">
<label for="hourly">æ™‚è–ªï¼ˆNT$ï¼‰</label>
<input id="hourly" type="number" min="0" step="1" placeholder="ä¾‹å¦‚ï¼š183">
<div class="notice">å¦‚æœä½ çŸ¥é“è‡ªå·±çš„æ™‚è–ªï¼Œå¡«é€™å€‹å°±å¥½ã€‚</div>
</div>
<div class="col">
<label for="monthly">æœˆè–ªï¼ˆNT$ï¼‰</label>
<input id="monthly" type="number" min="0" step="1" placeholder="ä¾‹å¦‚ï¼š28000">
</div>
<div class="col">
<label for="days">æ¯æœˆä¸Šç­å¤©æ•¸</label>
<input id="days" type="number" min="1" step="1" placeholder="ä¾‹å¦‚ï¼š22">
</div>
<div class="col">
<label for="hoursPerDay">æ¯å¤©ä¸Šç­æ™‚æ•¸</label>
<input id="hoursPerDay" type="number" min="1" step="0.5" placeholder="ä¾‹å¦‚ï¼š8">
</div>
</div>
<div style="margin-top:10px;display:flex;gap:8px;align-items:center;flex-wrap:wrap;">
<button id="calcHourly" class="btn-secondary">ç”¨æœˆè–ªå¹«æˆ‘ç®—æ™‚è–ª</button>
<span class="small" id="hourlyDisplay"></span>
</div>
</div>

<!-- æ‹‰å±ç´€éŒ„ / è¨ˆæ™‚å™¨ -->
<div class="card">
<h2>2. è¨˜éŒ„ä¸€æ¬¡æ‹‰å±</h2>
<div class="row">
<div class="col">
<label for="minutes">é€™æ¬¡æ‹‰å¹¾åˆ†é˜ï¼Ÿ</label>
<input id="minutes" type="number" min="1" step="1" placeholder="ä¾‹å¦‚ï¼š7">
<div class="notice">å¦‚æœä½ æ‡¶å¾—ç®—ï¼Œä¸‹é¢æœ‰æ‹‰å±è¨ˆæ™‚å™¨å¯ç”¨ã€‚</div>
</div>
<div class="col">
<label>æˆ–ä½¿ç”¨è¨ˆæ™‚å™¨é‡é€™ä¸€æ³¡</label>
<div class="timer-display" id="timer" data-sec="0">00:00</div>
<div style="display:flex;gap:8px;flex-wrap:wrap;justify-content:flex-start;">
<button id="startTimer" class="btn-primary">é–‹å§‹è¨ˆæ™‚</button>
<button id="stopTimer" class="btn-secondary">åœæ­¢ä¸¦å¡«å…¥åˆ†é˜</button>
<button id="resetTimer" class="btn-danger">é‡ç½®</button>
</div>
</div>
</div>
<div style="margin-top:10px;display:flex;justify-content:flex-end;">
<button id="addSession" class="btn-primary">åŠ å…¥é€™æ¬¡æ‹‰å±ç´€éŒ„</button>
</div>
<p class="notice">âš  è¨ˆç®—çµæœåªå­˜åœ¨é€™å€‹ç€è¦½å™¨åˆ†é ï¼Œä¸æœƒä¸Šå‚³ä»»ä½•åœ°æ–¹ï¼ˆæ”¾å¿ƒæ‹‰ï¼‰ã€‚</p>
</div>

<!-- çµ±è¨ˆçµæœ -->
<div class="card">
<h2>3. ä»Šå¤©å¸¶è–ªæ‹‰å±çµ±è¨ˆ</h2>
<div class="summary">
ä»Šå¤©ç¸½å…±æ‹‰äº† <span id="totalMinutes">0</span> åˆ†é˜ï¼Œ  
ç­‰æ–¼è³ºäº† <span id="totalMoney">0</span> å…ƒ ğŸ’°
</div>
<p class="small" id="moneyDetail"></p>
<div class="table-wrapper">
<table>
<thead>
<tr>
<th>#</th>
<th>åˆ†é˜</th>
<th>é€™æ¬¡è³º</th>
<th>å‚™è¨»</th>
<th>æ“ä½œ</th>
</tr>
</thead>
<tbody id="sessionBody"></tbody>
</table>
</div>
<p class="small">å°æé†’ï¼šå¦‚æœä½ è€é—†çœ‹åˆ°é€™å€‹ç¶²é ï¼Œè«‹èªªé€™æ˜¯ã€Œå¥åº·æ’ä¾¿ç´€éŒ„ç³»çµ±ã€ã€‚</p>
<div style="margin-top:8px;display:flex;justify-content:flex-end;">
<button id="clearAll" class="btn-danger">æ¸…ç©ºä»Šå¤©ç´€éŒ„</button>
</div>
</div>

</div>

<script>
const hourlyInput=document.getElementById("hourly");
const monthlyInput=document.getElementById("monthly");
const daysInput=document.getElementById("days");
const hoursPerDayInput=document.getElementById("hoursPerDay");
const calcHourlyBtn=document.getElementById("calcHourly");
const hourlyDisplay=document.getElementById("hourlyDisplay");

const minutesInput=document.getElementById("minutes");
const addSessionBtn=document.getElementById("addSession");
const totalMinutesSpan=document.getElementById("totalMinutes");
const totalMoneySpan=document.getElementById("totalMoney");
const moneyDetail=document.getElementById("moneyDetail");
const sessionBody=document.getElementById("sessionBody");
const clearAllBtn=document.getElementById("clearAll");

const timerDisplay=document.getElementById("timer");
const startTimerBtn=document.getElementById("startTimer");
const stopTimerBtn=document.getElementById("stopTimer");
const resetTimerBtn=document.getElementById("resetTimer");

let sessions=[];
let timerInterval=null;

function formatTime(sec){
  const m=Math.floor(sec/60);
  const s=sec%60;
  return(String(m).padStart(2,"0")+":"+String(s).padStart(2,"0"));
}

function updateTimerDisplay(){
  const sec=parseInt(timerDisplay.getAttribute("data-sec")||"0");
  timerDisplay.textContent=formatTime(sec);
}

function getHourlyWage(){
  const h=parseFloat(hourlyInput.value);
  if(!isNaN(h)&&h>0)return h;
  const m=parseFloat(monthlyInput.value);
  const d=parseFloat(daysInput.value);
  const hp=parseFloat(hoursPerDayInput.value);
  if(isNaN(m)||isNaN(d)||isNaN(hp)||m<=0||d<=0||hp<=0)return null;
  return m/(d*hp);
}

function renderSummary(){
  let totalMin=0;
  sessions.forEach(s=>{totalMin+=s.minutes;});
  totalMinutesSpan.textContent=totalMin.toString();
  const hourly=getHourlyWage();
  if(!hourly){
    totalMoneySpan.textContent="0";
    moneyDetail.textContent="è«‹å…ˆè¨­å®šå¥½æ™‚è–ªï¼ˆæˆ–ç”¨æœˆè–ªå¹«ä½ ç®—ï¼‰ï¼Œæ‰æœƒé¡¯ç¤ºè³ºå¤šå°‘ã€‚";
    return;
  }
  const totalHours=totalMin/60;
  const totalMoney=totalHours*hourly;
  totalMoneySpan.textContent=Math.round(totalMoney);
  moneyDetail.textContent="ä»¥æ™‚è–ªç´„ NT$"+hourly.toFixed(2)+" è¨ˆç®—ï¼Œä»Šå¤©æ‹‰äº†ç´„ "+totalHours.toFixed(2)+" å°æ™‚çš„å±æ™‚é–“ã€‚";
}

function renderSessions(){
  sessionBody.innerHTML="";
  if(sessions.length===0){
    const tr=document.createElement("tr");
    tr.innerHTML='<td colspan="5" style="text-align:center;color:#777;">é‚„æ²’æœ‰ä»»ä½•ä¸€æ³¡ï¼ŒåŠªåŠ›å·¥ä½œä¸­ï¼ˆï¼Ÿï¼‰</td>';
    sessionBody.appendChild(tr);
    renderSummary();
    return;
  }
  sessions.forEach((s,idx)=>{
    const tr=document.createElement("tr");
    const hourly=getHourlyWage();
    let moneyText="â€”";
    if(hourly){
      const money=(s.minutes/60)*hourly;
      moneyText="ç´„ NT$"+money.toFixed(1);
    }
    tr.innerHTML=
      "<td>"+(idx+1)+"</td>"+
      "<td>"+s.minutes+" åˆ†é˜</td>"+
      "<td>"+moneyText+"</td>"+
      '<td>'+(s.fromTimer?'<span class="badge">è¨ˆæ™‚å™¨</span>':"")+"</td>"+
      '<td><button class="btn-danger btn-small" data-index="'+idx+'">åˆªé™¤</button></td>';
    sessionBody.appendChild(tr);
  });
  renderSummary();
}

calcHourlyBtn.addEventListener("click",function(){
  const m=parseFloat(monthlyInput.value);
  const d=parseFloat(daysInput.value);
  const hp=parseFloat(hoursPerDayInput.value);
  if(isNaN(m)||isNaN(d)||isNaN(hp)||m<=0||d<=0||hp<=0){
    alert("è«‹æŠŠæœˆè–ªã€ä¸Šç­å¤©æ•¸ã€æ¯å¤©å·¥æ™‚éƒ½å¡«å¥½å†ç®—ã€‚");
    return;
  }
  const h=m/(d*hp);
  hourlyInput.value=h.toFixed(2);
  hourlyDisplay.textContent="ä¼°ç®—æ™‚è–ªç´„ NT$"+h.toFixed(2);
  renderSummary();
});

addSessionBtn.addEventListener("click",function(){
  const minutes=parseInt(minutesInput.value,10);
  if(isNaN(minutes)||minutes<=0){
    alert("è«‹å¡«ä¸€å€‹æ­£å¸¸çš„åˆ†é˜æ•¸å•¦ï¼ˆè‡³å°‘ 1 åˆ†é˜ï¼‰ã€‚");
    return;
  }
  sessions.push({minutes,fromTimer:false});
  minutesInput.value="";
  renderSessions();
});

sessionBody.addEventListener("click",function(e){
  const target=e.target;
  if(target.tagName==="BUTTON"){
    const idx=parseInt(target.getAttribute("data-index"),10);
    if(!isNaN(idx)){
      if(confirm("ç¢ºå®šè¦åˆªæ‰é€™æ¬¡çš„å¸¶è–ªæ‹‰å±ç´€éŒ„å—ï¼Ÿ")){
        sessions.splice(idx,1);
        renderSessions();
      }
    }
  }
});

clearAllBtn.addEventListener("click",function(){
  if(!confirm("è¦æ¸…ç©ºä»Šå¤©æ‰€æœ‰æ‹‰å±ç´€éŒ„å—ï¼Ÿ")){
    return;
  }
  sessions=[];
  renderSessions();
});

startTimerBtn.addEventListener("click",function(){
  if(timerInterval!==null)return;
  timerDisplay.classList.add("timer-running");
  timerInterval=setInterval(function(){
    let sec=parseInt(timerDisplay.getAttribute("data-sec")||"0");
    sec++;
    timerDisplay.setAttribute("data-sec",sec.toString());
    updateTimerDisplay();
  },1000);
});

stopTimerBtn.addEventListener("click",function(){
  if(timerInterval===null)return;
  clearInterval(timerInterval);
  timerInterval=null;
  timerDisplay.classList.remove("timer-running");
  const sec=parseInt(timerDisplay.getAttribute("data-sec")||"0");
  const min=Math.max(1,Math.round(sec/60));
  minutesInput.value=min.toString();
  alert("é€™æ³¡å¤§ç´„ "+min+" åˆ†é˜ï¼Œå·²å¹«ä½ å¡«åˆ°æ¬„ä½ã€‚æŒ‰ã€ŒåŠ å…¥é€™æ¬¡æ‹‰å±ç´€éŒ„ã€å°±æœƒç®—éŒ¢ã€‚");
});

resetTimerBtn.addEventListener("click",function(){
  if(timerInterval!==null){
    clearInterval(timerInterval);
    timerInterval=null;
  }
  timerDisplay.setAttribute("data-sec","0");
  updateTimerDisplay();
  timerDisplay.classList.remove("timer-running");
});

hourlyInput.addEventListener("input",renderSummary);
[monthlyInput,daysInput,hoursPerDayInput].forEach(el=>{
  el.addEventListener("input",function(){
    hourlyDisplay.textContent="";
    renderSummary();
  });
});

(function init(){
  updateTimerDisplay();
  renderSessions();
})();
</script>
</body>
</html>
